# ProdGen

ProdGen is a desktop application for managing product categories, brands, and models, and for generating listings based on customizable templates.

## Збірка редактора описів — покроково «для першокласника»

Редактор описів — це окремий веб-фронтенд у папці `desc-editor`. Щоб його зібрати, виконайте наведені нижче кроки буквально по порядку. Навіть якщо ви ніколи не працювали з Node.js, достатньо просто повторювати дії й перевіряти підказки.

### 1. Встановіть Node.js з `npm`

1. Відкрийте сторінку [https://nodejs.org](https://nodejs.org) у браузері.
2. Натисніть **LTS** (стабільну) версію для вашої системи Windows/macOS/Linux.
3. Завантажте інсталятор і запустіть його. Під час встановлення залишайте стандартні налаштування.
4. Після завершення відкрийте «Термінал» / PowerShell і переконайтеся, що команди працюють:

   ```bash
   node --version
   npm --version
   ```

   Якщо ви бачите два рядки на кшталт `v18.19.0` і `9.6.7`, усе добре. Якщо з'являється повідомлення «command not found», перезапустіть термінал або перевстановіть Node.js із позначкою «Add to PATH».

### 2. Підготуйте Python-застосунок

1. Відкрийте корінь цього репозиторію у терміналі (папка, де лежить цей файл `README.md`).
2. Перевірте, що в системі є Python 3.10+ (команда `python --version`).
3. За потреби активуйте віртуальне середовище (наприклад, `python -m venv .venv` та `source .venv/bin/activate` на Linux/macOS або `.venv\Scripts\activate` у Windows).
4. Встановіть Python-залежності додатка (наприклад, `pip install -r requirements.txt`, якщо файл присутній, або необхідні модулі з розділу **Manual QA** нижче).

### 3. Запустіть автоматичну збірку редактора

1. Усе ще перебуваючи в корені репозиторію, введіть у терміналі:

   ```bash
   python -m desc_editor_build
   ```

2. Скрипт послідовно зробить усе сам:
   - Перевірить, чи знайдено Node.js і чи його версія не старіша за 18.x.
   - Переконається, що `npm` доступний (за потреби можна вказати власний шлях через `--npm /шлях/до/npm`).
   - Встановить фронтенд-залежності командою `npm install` лише коли вони відсутні або застаріли.
   - Побудує production-бандл командою `npm run build` і збереже його у `desc-editor/dist`.
   - Створить службові «штампи» в `node_modules/.install-stamp` та `dist/.build-stamp`, щоб наступні запуски перевіряли тільки, чи змінювалися вихідні файли.

3. Якщо все добре, ви побачите повідомлення на кшталт `[desc-editor] Building production bundle…` та після завершення — нові файли у `desc-editor/dist/index.html`.

> **Підказка.** Більшість операцій займає до кількох хвилин. Під час першої інсталяції залежностей процес може виглядати «завислим» — просто зачекайте, доки термінал не поверне запрошення (`$` або `>`).

### 4. Автозбірка під час запуску застосунку

* Нічого вручну робити не потрібно: при старті графічного інтерфейсу кнопка **«Відкрити візуальний редактор»** перевіряє наявність готового бандла.
* Якщо бандл ще не зібраний, застосунок запускає фонове встановлення залежностей та збірку самостійно. У правій панелі з'явиться статус «Готуємо веб-редактор…». Після успіху кнопка автоматично стане активною.
* Поки збірка виконується, відкривати редактор не можна — дочекайтеся повідомлення «Редактор готовий до запуску».

### 5. Типові помилки і як їх виправити

| Симптом | Причина | Що робити |
| --- | --- | --- |
| `Не знайдено npm` | Node.js не встановлено або не додано в PATH | Перевстановіть Node.js, переконайтеся, що `node --version` працює. За необхідності передайте шлях: `python -m desc_editor_build --npm "C:\Program Files\nodejs\npm.cmd"`. |
| `Потрібна версія Node.js 18 або новіша` | Встановлено занадто старий Node.js | Оновіть Node.js із [nodejs.org](https://nodejs.org) до LTS 18+. |
| Помилка під час `npm install` / `npm run build` | Перерваний інтернет, блокування антивірусом, нестача місця на диску | Повторіть команду `python -m desc_editor_build --force`. Якщо помилка повторюється, відкрийте `desc-editor` у терміналі та запустіть `npm install` / `npm run build` вручну, щоб побачити детальні логи. |
| Графічний застосунок показує «Автозбірка не вдалася» | Скрипт не зміг підготувати бандл у фоні | Виконайте `python -m desc_editor_build --force` в терміналі й після успіху перезапустіть застосунок. |

### 6. Додаткові корисні параметри

```bash
python -m desc_editor_build --force          # примусовий перевстановлення залежностей і rebuild
python -m desc_editor_build --skip-install   # пропустити npm install (якщо впевнені, що node_modules актуальні)
python -m desc_editor_build --quiet          # мінімум виводу (зручно для CI)
```

Після успішної збірки під час наступних запусків скрипт миттєво завершується, якщо вихідні файли не змінювалися.

## Manual QA
### Підготовка до правильної роботи

1. Потрібно щоб на комп'ютері були встановлені бібліотеки jinja2 та pandas, для цього через powerShell або інший термінал виконайте запити:
  - pip install jinja2
  - pip install pandas
2. Для роботи нового візуального редактора описів переконайтеся, що зібрано веб-фронтенд (див. розділ «Збірка редактора описів» нижче).


### Перейменування з дублікатами

1. Запустіть додаток `python main.py` і переконайтеся, що у каталозі є щонайменше дві категорії (наприклад, «Смартфони» та «Планшети»).
2. Спробуйте перейменувати одну категорію на назву іншої через кнопку **Перейменувати** або через подвійний клік по рядку.
3. Переконайтеся, що з'являється повідомлення «Категорія з такою назвою вже існує» і інтерфейс залишається працездатним.
4. Повторіть ті самі дії для бренду та моделі всередині категорії, щоб впевнитися, що попередження з'являється і таблиці не блокуються.

### Налаштування експорту

1. Перейдіть на вкладку **Експорт** та увімкніть поля, які потрібно бачити у файлі (наприклад, активуйте «Назва_позиції_укр» або додайте власне поле).
2. За потреби відредагуйте шаблон поля, використовуючи доступні змінні (наприклад, `{{ title }}` або `{{ spec('Вага, кг') }}`), та натисніть **Застосувати** → **Зберегти**.
3. На вкладці **Генерація** оберіть декілька моделей і натисніть **Згенерувати**.
4. Відкрийте згенерований файл та переконайтеся, що виведено лише вибрані колонки у потрібному порядку і окремий файл характеристик не створюється.

Ці кроки підтверджують, що попередження про дублікати й надалі працюють, а кастомізація полів експорту дозволяє формувати файл під вимоги різних маркетплейсів без окремого експорту характеристик.
